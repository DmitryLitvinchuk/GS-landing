
/*
 * Scamp Player ver. 2.2.0

 * jQuery SoundManager 2 Plugin
 *
 * Copyright (c) 2015 Mariusz Rek
 * Rascals Themes 2015
 *
 */

(function(a){a.ScampPlayer=function(b,c){var m={sm_options:{},queue:null,iscroll_options:{scrollX:false,scrollY:true,mouseWheel:true,scrollbars:true,interactiveScrollbars:true,scrollbars:"custom",click:true},volume:100,autoplay:false,loop:false,random:false,titlebar:false,no_track_image:null,delay:5,path:null,load_first_track:true,client_id:"23f5c38e0aa354cdd0e1a6b4286f6aa4",debug:false,link_filter:".track-title",labels:{play:"Play",cover:"Cover",title:"Title/Artist",buy:"Buy/Download",remove:"Remove"},obj:{status:"ready",action:"",tracks:[],tracks_size:0,track_nr:-1},mobile:false,status:null,soundcloud:false,track_id:0,new_tracks_nr:0,new_tracks_notifications:true,sm_init:false,rebuild:false,sound:null,track:null,searching:false,tracklist_length:null,document_title:document.title,track_html:null,tracklist:null,onReady:function(){},onTrackEnd:function(){},onTrackStart:function(){}};
var d=this;d.settings={};var q=function(){d.settings=a.extend({},m,c);d.el=b;if(window.soundManager){sm_obj={onready:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){d.settings.mobile=true;
}if(d.settings.mobile){d.settings.autoplay=false;}if(d.settings.mobile&&d.settings.path!=null){a("body").append('<div id="scamp-mobile-init"></div>');var w=soundManager.createSound({id:"init_mobile_track",url:d.settings.path+"/blank.mp3",autoload:false,volume:10,onload:function(){},onplay:function(){},onpause:function(){},onresume:function(){},onstop:function(){},onfinish:function(){},whileloading:function(){},whileplaying:function(){}});
a("#scamp-mobile-init").on("touchstart click mousemove",function(z){w.play();a(this).remove();});}if(typeof SC!=="undefined"){SC.initialize({client_id:d.settings.client_id});
SC.whenStreamingReady(function(){d.settings.soundcloud=true;});}d.settings.sm_init=true;var x=null;if(a("> a",d.el).length){x=new Array();var y=a("> a",d.el).length;
a("> a",d.el).each(function(){x.push(a(this));a(this).remove();});}d.el.append('<div id="sp-toggle-wrap"><div id="sp-toggle"></div></div><div class="sp-main-container"><div class="sp-queue-container"><div class="sp-queue"><div id="sp-scroller"><table id="sp-queue-scroll"><thead><tr><th>'+d.settings.labels.play+"</th><th>"+d.settings.labels.cover+'</th><th class="sp-th-title">'+d.settings.labels.title+'</th><th class="sp-th-cart sp-small-screen">'+d.settings.labels.buy+'</th><th class="sp-th-remove sp-small-screen sp-medium-screen">'+d.settings.labels.remove+'</th></tr></thead><tbody></tbody></table></div></div><div class="sp-progress-mobile"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div></div><div class="sp-player-container"><div class="sp-buttons-container"><div class="sp-controls"><a class="sp-prev-button"></a><a class="sp-play-button"></a><a class="sp-next-button"></a><div class="sp-volume-container"><div class="sp-volume-bar-container"><div class="sp-volume-slider"><span class="sp-volume-position"></span></div></div><a class="sp-volume-button"></a></div></div><div class="sp-queue-button-container"><span class="sp-badge"></span><a class="sp-queue-button"></a></div></div><div class="sp-progress-container"><div class="sp-progress"><span class="sp-loading"></span><span class="sp-position"></span><span class="sp-time-elapsed"></span><span class="sp-time-total"></span></div></div><div class="sp-track-container"><div class="sp-track-details"><a class="sp-track-cover"><img src="'+d.settings.no_track_image+'" alt="Track cover" class="sp-track-artwork"/></a><a class="sp-track-title"></a><a class="sp-track-artist"></a><div class="sp-marquee-container"><span class="sp-marquee"></span></div></div></div></div></div>');
d.settings.track_html=['<tr class="sp-track">','<td><a class="sp-track-control sp-icon" href="#"></a></td>','<td class="sp-cover-artwork"><img src="" alt="Cover" /></td>','<td class="sp-title"><a class="sp-title-button"></a><a class="sp-artist-button"></a></td>','<td class="sp-cart sp-small-screen"><a class="sp-icon sp-cart-button"></a></td>','<td class="sp-remove sp-small-screen sp-medium-screen"><span class="sp-icon sp-remove-button"></span></td>'].join("\n");
d.settings.tracklist=a("#sp-queue-scroll");if(typeof IScroll!=="undefined"){d.settings.queue=new IScroll("#sp-scroller",d.settings.iscroll_options);}else{return false;
}if(a(d.el).hasClass("sp-show-list")){_set_queue_height();}a(".sp-volume-position").css("width",d.settings.volume+"%");_set_vol_class(d.settings.volume);
if(!d.settings.mobile){var v=function(z){a(".sp-volume-bar-container").fadeToggle(200,"swing");d.el.removeClass("sp-show-list");z.preventDefault();z.stopPropagation();
};a(".sp-volume-button").on("click",v);a(document).click(function(A){var z=a(".sp-volume-bar-container");if(!z.is(A.target)&&z.has(A.target).length===0){a(".sp-volume-button").off("click");
a(".sp-volume-bar-container").fadeOut(200,"swing",function(){a(".sp-volume-button").on("click",v);});}});}if(x!==null){d.settings.obj={status:"working",action:"add_tracks",tracks:x,tracks_size:y,track_nr:-1,};
t();}a(".sp-play-button").on("touchstart click",n);a(".sp-next-button").on("touchstart click",f);a(".sp-prev-button").on("touchstart click",e);a(".sp-queue-button").on("touchstart click",function(z){d.el.toggleClass("sp-show-list");
_set_queue_height();z.preventDefault();});a("#sp-toggle").on("touchstart click",function(z){d.el.toggleClass("sp-show-player");z.preventDefault();});l();
d.update_events("body");d.el.addClass("sp-show");d.settings.onReady.call(undefined);return;},ontimeout:function(){},defaultOptions:{volume:d.settings.volume,usePeakData:false}};
a.extend(d.settings.sm_options,sm_obj);soundManager.setup(d.settings.sm_options);}};_set_queue_height=function(){var w=a(".sp-player-container",d.el).outerHeight();
var v=a(".sp-progress-mobile ",d.el).outerHeight();var x=a(window).height();if(a(".sp-progress-mobile",d.el).is(":visible")){x=x-(w*2);}else{x=x-w;w=0;
}a(".sp-queue-container",d.el).css("padding-bottom",w);a(".sp-queue-container",d.el).height(x);setTimeout(function(){d.settings.queue.refresh();},200);
return x;};a(window).on("resize",_set_queue_height);_get_track_index=function(){var v,w=d.settings.track.find(".sp-track-control").attr("href");track_from_queue=a("#sp-queue-scroll").find('.sp-track-control[href="'+w+'"]');
v=track_from_queue.parents('tr[class*="sp-track"]').index();return v;};var g=function(){var v=d.settings.track.find(".sp-track-control").attr("href");d.settings.sound=soundManager.createSound({id:"scamp_sound",url:v,autoload:false,volume:d.settings.volume,onload:function(){},onplay:function(){var w={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackStart.call(this,w);if(d.settings.sound.readyState==3){d.settings.status="play";}else{d.settings.track.addClass("loading");d.el.addClass("loading");
d.settings.status="loading";}d.update_content();a(".sp-volume-position").css("width",d.settings.volume+"%");d.settings.sound.setVolume(d.settings.volume);
},onpause:function(){d.settings.status="pause";d.update_content();if(!d.settings.searching){d.settings.track.removeClass("playing").addClass("paused");
d.el.removeClass("playing").addClass("paused");}},onresume:function(){d.settings.status="play";d.update_content();d.settings.track.removeClass("paused").addClass("playing");
d.el.removeClass("paused").addClass("playing");},onstop:function(){d.settings.sound.setPosition(0);d.settings.status="stop";d.update_content();d.settings.track.removeClass("playing loading paused");
d.el.removeClass("playing loading paused");a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);},onfinish:function(){var w={title:d.settings.track.find(".sp-title-button").text(),url:d.settings.track.find(".sp-track-control").attr("href"),artist:d.settings.track.find(".sp-artist-button").text(),track_index:_get_track_index(),tracklist_length:d.settings.tracklist_length};
d.settings.onTrackEnd.call(this,w);a(".sp-time-elapsed, .sp-time-total").empty();a(".sp-progress").find(".sp-position").width(0);d.settings.status="stop";
d.update_content();d.settings.track.removeClass("loading paused");d.el.removeClass("loading paused");if(d.settings.random){s();return false;}if(d.settings.loop){f();
}else{var x=_get_track_index();if(x!=d.settings.tracklist_length){f();}else{d.settings.track.removeClass("playing");d.el.removeClass("playing");}}},whileloading:function(){a(".sp-progress").find(".sp-loading").width(d.settings.sound.bytesLoaded/d.settings.sound.bytesTotal*100+"%");
},whileplaying:function(){d.settings.track.removeClass("paused loading").addClass("playing");d.el.removeClass("paused loading").addClass("playing");d.settings.status="play";
d.update_content();a(".sp-progress").find(".sp-position").width(d.settings.sound.position/d.settings.sound.durationEstimate*100+"%");a(".sp-time-elapsed").html(_format_time(d.settings.sound.position));
a(".sp-time-total").html(_format_time(d.settings.sound.durationEstimate));}});if(d.settings.load_first_track){d.settings.load_first_track=false;}else{d.settings.sound.togglePause();
}u();};var n=function(){if(d.settings.tracklist_length==null){return;}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");
}if(d.settings.sound){d.settings.sound.togglePause();}else{g();}if(d.settings.titlebar){document.title=d.settings.track.find(".sp-title-button").text()+" | "+d.settings.document_title;
}return false;};var s=function(){if(d.settings.tracklist_length==null||d.settings.tracklist_length<2){d.settings.track=v;n();return false;}function w(A,z){return Math.floor(Math.random()*(z-A+1))+A;
}var y=_get_track_index(),v=null,x=null;while((x=w(0,d.settings.tracklist_length))==y){}d.settings.track.removeClass("playing");d.el.removeClass("playing");
v=a("#sp-queue-scroll tbody tr:eq("+x+")");_destruct_sound();d.settings.track=v;n();if(d.settings.sound){d.settings.sound.setPosition(0);}return true;};
var f=function(){if(d.settings.tracklist_length==null){return;}var y=_get_track_index(),w=y+1,v=null,x=false;if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");
d.el.removeClass("playing");x=true;}if(w>d.settings.tracklist_length){w=0;}v=a("#sp-queue-scroll tbody tr:eq("+w+")");_destruct_sound();d.settings.track=v;
if(x){n();}if(d.settings.sound){d.settings.sound.setPosition(0);}return false;};var e=function(){if(d.settings.tracklist_length==null){return;}var y=_get_track_index(),x=y-1,v=null,w=false;
if(d.el.hasClass("playing")){d.settings.track.removeClass("playing");d.el.removeClass("playing");w=true;}if(x<0){x=d.settings.tracklist_length;}v=a("#sp-queue-scroll tbody tr:eq("+x+")");
_destruct_sound();d.settings.track=v;if(w){n();}if(d.settings.sound){d.settings.sound.setPosition(0);}return false;};var k=function(){if(d.settings.tracklist_length==null){return;
}if(d.settings.track==null){d.settings.track=a("#sp-queue-scroll tbody tr:eq(0)");}if(d.settings.sound){d.settings.sound.stop();}return false;};var u=function(){a(".sp-track-container a",d.el).removeAttr("href").removeAttr("target");
a(".sp-track-container .sp-track-title, .sp-track-container .sp-track-artist",d.el).text("");a(".sp-track-container .sp-track-artwork",d.el).attr("src",d.settings.no_track_image);
a(".sp-marquee",d.el).text("");if(d.settings.sound){var B=d.settings.track.find(".sp-cover-artwork img").attr("src"),C=d.settings.track.find(".sp-title-button").text(),x=d.settings.track.find(".sp-artist-button").text(),z=d.settings.track.find(".sp-artist-button").attr("href"),w=d.settings.track.find(".sp-artist-button").attr("target"),v=d.settings.track.find(".sp-title-button").attr("href"),A=d.settings.track.find(".sp-title-button").attr("target");
shop_url=d.settings.track.find(".sp-tl-shop").attr("href"),shop_target=d.settings.track.find(".sp-tl-shop").attr("target");if(x!==""&&z!==""){a(".sp-track-container .sp-track-artist",d.el).attr("href",z);
if(w!==""){w=w;}else{w="_self";}a(".sp-track-container .sp-track-artist",d.el).attr("target",w);}if(v!==""){a(".sp-track-container .sp-track-title",d.el).attr("href",v);
if(A!==""){A=A;}else{A="_self";}a(".sp-track-container .sp-track-title",d.el).attr("target",A);}a(".sp-track-container .sp-track-artwork",d.el).attr("src",B);
a(".sp-track-container .sp-track-title",d.el).text(C);a(".sp-track-container .sp-track-artist",d.el).text(x);var y="<strong>"+C+"</strong>";if(x!==""){y=y+" - "+x;
}a(".sp-marquee",d.el).html(y);}return false;};_destruct_sound=function(){if(d.settings.sound){d.settings.sound.stop();d.settings.sound.setPosition(0);
d.settings.sound.destruct();d.settings.sound=null;u();}};var t=function(){d.settings.obj.track_nr++;if(d.settings.obj.track_nr==0){d.el.addClass("sp-queue-loading");
a(".sp-queue").css("opacity",0);}if(d.settings.obj.track_nr>=d.settings.obj.tracks_size){h();}else{setTimeout(r,d.settings.delay);}};var h=function(){var w=null,v=null,x=null;
if(a("#sp-scroller tr").length>0&&d.settings.rebuild){_set_queue_height();d.el.removeClass("sp-queue-loading");a(".sp-queue").css("opacity",1);d.settings.rebuild=false;
if(d.settings.new_tracks_notifications){a(".sp-badge",d.el).text("+"+d.settings.new_tracks_nr);if(a(".sp-badge",d.el).text()!="+0"){a(".sp-badge",d.el).addClass("sp-show-badge");
setTimeout(function(){a(".sp-badge",d.el).removeClass("sp-show-badge");},5000);}}d.settings.new_tracks_nr=0;}else{d.el.removeClass("sp-queue-loading");
a(".sp-queue").css("opacity",1);}if(d.settings.track!=null&&d.settings.autoplay){if(d.settings.random){s();}else{n();}d.settings.autoplay=false;}else{if(d.settings.track!=null&&d.settings.load_first_track){if(d.settings.random){s();
}else{n();}}}if(d.settings.obj.action=="play_track"||d.settings.obj.action=="play_tracks"){for(var y=0;y<d.settings.obj.tracks_size;y++){w=d.settings.obj.tracks[y].data("status");
x=d.settings.obj.tracks[y].attr("href");if(w=="track_ready"||w=="already_onlist"){v=d.settings.track.find(".sp-track-control").attr("href");if(v!=x){_destruct_sound();
var z=a("#sp-queue-scroll").find('.sp-track-control[href="'+x+'"]');d.settings.track=z.parents('tr[class*="sp-track"]');}n();break;}}}d.settings.obj.status="ready";
};var r=function(){var x=d.settings.obj.track_nr,w=d.settings.obj.tracks[x].attr("href"),v=/http(s?):\/\/soundcloud/;if(v.test(w)){if(a('.sp-queue .sp-track[data-sc="'+w+'"]').length>0){d.settings.obj.tracks[x].attr("data-status","already_onlist");
var y=a('#sp-queue-scroll tbody .sp-track[data-sc="'+w+'"]');y=y.find(".sp-track-control").attr("href");d.settings.obj.tracks[x].attr("href",y);t();}else{_add_soundcloud();
}}else{if(a('.sp-queue .sp-track-control[href="'+w+'"]').length>0){d.settings.obj.tracks[x].attr("data-status","already_onlist");t();}else{if(w!=""||w!="#"||w!=undefined){d.settings.obj.tracks[x].attr("data-status","file_exists");
_create_track();}else{d.settings.obj.tracks[x].attr("data-status","Error404");t();}}}};_add_soundcloud=function(){var x=d.settings.obj.track_nr,v=d.settings.obj.tracks[x].attr("href");
if(d.settings.client_id==""){d.settings.obj.tracks[x].attr("data-status","Error404");t();return false;}else{if(!d.settings.soundcloud){d.settings.obj.tracks[x].attr("data-status","Error404");
t();return false;}}if(d.settings.obj.tracks[x].data("sc_stream")!=undefined){var w={stream_url:null,artwork_url:null,title:null,permalink_url:null,user:{username:null,permalink_url:null}};
w.stream_url=d.settings.obj.tracks[x].data("sc_stream");w.artwork_url=d.settings.obj.tracks[x].data("sc_art");w.title=d.settings.obj.tracks[x].data("sc_title");
w.user.username=d.settings.obj.tracks[x].data("artist");w.user.permalink=d.settings.obj.tracks[x].data("artist_url");w.permalink=d.settings.obj.tracks[x].data("release_url");
_create_soundcloud(w);return false;}SC.get("/resolve",{url:v},function(y){if(y.length!=undefined){y.tracks=y;}if(y.errors){d.settings.obj.tracks[x].attr("data-status","Error404");
t();}else{if(y.kind!=undefined&&y.kind=="user"){SC.get("/users/"+y.id+"/tracks",function(z){z.tracks=z;_process_sc_tracks(z);});}else{if(y.kind!=undefined&&y.kind=="group"){SC.get("/groups/"+y.id+"/tracks",function(z){z.tracks=z;
_process_sc_tracks(z);});}else{if(y.tracks){_process_sc_tracks(y);}else{_create_soundcloud(y);}}}}});};_process_sc_tracks=function(y){var B=d.settings.obj.track_nr,v=d.settings.obj.tracks[B].attr("href"),w=B,C=[],x=d.settings.obj.tracks[B].attr("data-artist"),E=d.settings.obj.tracks[B].attr("data-artist_url"),D=d.settings.obj.tracks[B].attr("data-artist_target"),A=d.settings.obj.tracks[B].attr("data-release_url"),z=d.settings.obj.tracks[B].attr("data-release_target");
shop_url=d.settings.obj.tracks[B].attr("data-shop_url"),shop_target=d.settings.obj.tracks[B].attr("data-shop_target"),free_download=d.settings.obj.tracks[B].attr("data-free_download");
d.settings.obj.tracks.splice(B,1);d.settings.obj.tracks_size=d.settings.obj.tracks_size-1;d.settings.obj.track_nr=d.settings.obj.track_nr-1;if(shop_url==undefined||shop_url==""){shop_url="";
}if(shop_target==undefined||shop_target==""){shop_target="";}if(free_download==undefined||free_download==""){free_download="";}a.each(y.tracks,function(K,H){var M,L,G,J,I;
if(x==undefined||x==""){M=H.user.username;}else{M=x;}if(E==undefined||E==""){L=H.user.permalink_url;G="_blank";}else{L=E;if(D==undefined||D==""){G="_blank";
}else{G=D;}}if(A==undefined||A==""){J=H.permalink_url;I="_blank";}else{J=A;if(z==undefined||z==""){I="_blank";}else{I=z;}}var F='<a href="'+H.permalink_url+'" data-cover="" data-sc_list="'+v+'" data-sc_stream="'+H.stream_url+'" data-sc_art="'+H.artwork_url+'" data-sc_title="'+H.title+'" data-artist="'+M+'" data-artist_url="'+L+'" data-artist_target="'+G+'" data-release_url="'+J+'" data-release_target="'+I+'" data-shop_url="'+shop_url+'" data-shop_target="'+shop_target+'" data-free_download="'+free_download+'">'+H.title+"</a>";
C.push(a(F));});_insert_array_at(d.settings.obj.tracks,w,C);d.settings.obj.tracks_size=d.settings.obj.tracks_size+C.length;t();};_insert_array_at=function(x,w,v){Array.prototype.splice.apply(x,[w,0].concat(v));
return x;};_create_soundcloud=function(x){var z=d.settings.obj.track_nr,v=d.settings.obj.tracks[z].attr("href"),D=x.stream_url,w=d.settings.obj.tracks[z].attr("data-artist"),C=d.settings.obj.tracks[z].attr("data-artist_url"),B=d.settings.obj.tracks[z].attr("data-artist_target"),A=d.settings.obj.tracks[z].attr("data-release_url"),y=d.settings.obj.tracks[z].attr("data-release_target");
if(D===undefined){console.log("Soundcloud error: No stream URL!");d.settings.obj.tracks[z].attr("data-status","Error404");t();return false;}(D.indexOf("secret_token")==-1)?D=D+"?":D=D+"&";
D=D+"consumer_key="+d.settings.client_id;if(w==undefined||w==""){w=x.user.username;}if(C==undefined||C==""){C=x.user.permalink_url;}if(B==undefined||B==""){B="_blank";
}if(A==undefined||A==""){A=x.permalink_url;}if(y==undefined||y==""){y="_blank";}d.settings.obj.tracks[z].attr("data-sc",v);d.settings.obj.tracks[z].attr("href",D);
d.settings.obj.tracks[z].attr("data-cover",x.artwork_url);d.settings.obj.tracks[z].attr("data-artist",w);d.settings.obj.tracks[z].attr("data-artist_url",C);
d.settings.obj.tracks[z].attr("data-artist_target",B);d.settings.obj.tracks[z].attr("data-release_url",A);d.settings.obj.tracks[z].attr("data-release_target",y);
d.settings.obj.tracks[z].text(x.title);_create_track();};_create_track=function(){d.settings.rebuild=true;var F=d.settings.obj.track_nr,v=d.settings.obj.tracks[F].attr("href"),E=d.settings.obj.tracks[F].text(),K=d.settings.obj.tracks[F].data("cover"),A=d.settings.obj.tracks[F].data("artist"),I=d.settings.obj.tracks[F].data("artist_url"),H=d.settings.obj.tracks[F].data("artist_target"),G=d.settings.obj.tracks[F].data("release_url"),D=d.settings.obj.tracks[F].data("release_target"),z=d.settings.obj.tracks[F].data("shop_url"),C=d.settings.obj.tracks[F].data("shop_target"),y=d.settings.obj.tracks[F].data("free_download"),B=a(d.settings.track_html),x=null;
if(a('.sp-queue .sp-track-control[href="'+v+'"]',d.el).length){d.settings.obj.tracks[F].attr("data-status","already_onlist");t();return false;}B.find(".sp-track-control").attr("href",v);
if(K==undefined||K==""){K=d.settings.no_track_image;}B.find(".sp-cover-artwork img").attr("src",K);B.find(".sp-title-button").text(E);if(G!=undefined||G!=""){B.find(".sp-title-button").attr("href",G);
if(D!=undefined||D!=""){B.find(".sp-title-button").attr("target",D);}}if(A!=undefined&&A!=""){B.find(".sp-artist-button").text(A);if(I!=undefined||I!=""){B.find(".sp-artist-button").attr("href",I);
if(H!=undefined&&H!=""){B.find(".sp-artist-button").attr("target",H);}}}if(z!=undefined&&z!=""){B.find(".sp-cart-button").attr("href",z);if(C!=undefined&&C!=""){B.find(".sp-cart-button").attr("target",C);
}if(y!=undefined&&y=="yes"){B.find(".sp-cart-button").addClass("sp-download-button");B.find(".sp-cart-button").attr("target",C);B.find(".sp-cart-button").attr("download",z);
}}else{B.find(".sp-cart-button").remove();}if(d.settings.obj.tracks[F].data("sc")!=undefined){var w=d.settings.obj.tracks[F].data("sc");B.attr("data-sc",w).addClass("sc-track");
}if(d.settings.obj.tracks[F].data("sc_list")!=undefined){var J=d.settings.obj.tracks[F].data("sc_list");B.attr("data-sc_list",J).addClass("sc-list");}d.settings.tracklist.append(B);
x=d.settings.tracklist.find(B);d.settings.track_id++;d.settings.new_tracks_nr++;d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;
if(d.settings.tracklist_length==0){d.settings.track=x;}d.settings.obj.tracks[F].attr("data-status","track_ready");x.find(".sp-track-control").on("click",j);
x.find(".sp-remove-button").on("click",o);t();};var j=function(v){v.preventDefault();var w=a(this).parents('tr[class*="sp-track"]');if(w.hasClass("playing")||w.hasClass("paused")){n();
return false;}_destruct_sound();d.settings.track=w;n();return false;};var o=function(y){y.preventDefault();var z=a(this).parents('tr[class*="sp-track"]'),C=a(this).parents('tr[class*="sp-track"]').index(),A=null,B=false;
if(z.hasClass("playing")){B=true;}if(d.settings.sound){A=d.settings.sound.url;}if(d.settings.tracklist_length==0){_destruct_sound();d.settings.track=null;
d.settings.tracklist_length=null;p(0);return;}if(A==z.find(".sp-track-control ").attr("href")){var x=C,w=x+1,v=null;if(w>d.settings.tracklist_length){w=0;
}v=a("#sp-queue-scroll tbody tr:eq("+w+")");if(B){_destruct_sound();d.settings.track=v;n();}else{_destruct_sound();}}p(C);d.settings.tracklist_length=a("#sp-queue-scroll tbody .sp-track").length-1;
};var p=function(v){if(a("#sp-scroller tr").length>0){d.settings.tracklist.find("tbody tr:eq("+v+")").remove();_set_queue_height;}return false;};var l=function(){var v="ontouchstart" in window,y=v?"touchstart":"mousedown",z=v?"touchmove":"mousemove",w=v?"touchend":"mouseup",x=v?"touchcancel":"mouseup";
a(".sp-volume-slider").on(y,function(G){if(d.settings.tracklist_length==null){return;}var D=a(this),A=D.find(".sp-volume-position"),F=D.offset().left,C=D.width(),E=d.settings.sound,B=null;
a(document).on(z,function(J){var I=v?J.originalEvent.touches[0]:J;var H=Math.max(0,Math.min(I.clientX-F,C));B=Math.floor(H/C*100);A.width(H);if(E){E.setVolume(B);
}_set_vol_class(B);return false;}).on(w,function(H){d.settings.volume=B;a(this).unbind(z);a(this).unbind(w);return false;}).trigger({type:z,clientX:G.clientX});
return false;});a(".sp-progress").bind(y,function(F){if(d.settings.tracklist_length==null){return;}var B=a(this).addClass("searching"),A=B.find(".sp-postion"),E=B.offset().left,C=B.width(),D=d.settings.sound;
d.settings.searching=true;D.pause();a(document).bind(z,function(I){var H=v?I.originalEvent.touches[0]:I;var G=Math.max(0,Math.min(H.clientX-E,C));A.width(G);
if(D){D.setPosition(G/C*D.durationEstimate);}return false;}).bind(w,function(G){d.settings.searching=false;B.removeClass("searching");if(d.el.hasClass("playing")&&D){D.resume();
}a(this).unbind(z);a(this).unbind(w);return false;}).trigger({type:z,clientX:F.clientX});return false;});};_set_vol_class=function(v){if(v==0){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-max").addClass("sp-vol-off");
}else{if(v<=50){a(".sp-volume-button").removeClass("sp-vol-max sp-vol-off").addClass("sp-vol-medium");}else{if(v>75){a(".sp-volume-button").removeClass("sp-vol-medium sp-vol-off").addClass("sp-vol-max");
}}}};_format_time=function(w){var y=Math.floor(w/1000),v=Math.floor(y/60),x=y-v*60;return v+":"+(x<10?"0"+x:x);};_pretty_link=function(B){var G="",D="",v=B.attr("href"),H=B.data("cover"),y=B.data("artist"),F=B.data("artist_url"),E=B.data("artist_target"),C=B.data("release_url"),A=B.data("release_target"),x=B.data("shop_url"),z=B.data("shop_target"),w=B.data("free_download");
if(d.settings.link_filter!=undefined&&d.settings.link_filter!=""){if(a(B).find(d.settings.link_filter).length){D=a(B).find(d.settings.link_filter).text();
}}if(H==undefined||H==""){H="";}else{H='data-cover="'+H+'"';}if(y==undefined||y==""){y="";}else{y='data-artist="'+y+'"';}if(F==undefined||F==""){F="";}else{F='data-artist_url="'+F+'"';
}if(E==undefined||E==""){E="";}else{E='data-artist_target="'+E+'"';}if(C==undefined||C==""){C="";}else{C='data-release_url="'+C+'"';}if(A==undefined||A==""){A="";
}else{A='data-release_target="'+A+'"';}if(x==undefined||x==""){x="";}else{x='data-shop_url="'+x+'"';}if(z==undefined||z==""){z="";}else{z='data-shop_target="'+z+'"';
}if(w==undefined||w==""){w="no";}else{w='data-free_download="'+w+'"';}G='<a href="'+v+'" '+H+" "+y+" "+F+" "+E+" "+C+" "+A+" "+x+" "+z+" "+w+">"+D+"</a>";
G=a(G);return G;};_add_track=function(x){x.preventDefault();if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;
}var v=_pretty_link(a(this)),w=[v];d.settings.obj={status:"working",action:"add_track",tracks:w,tracks_size:1,track_nr:-1};t();return false;};_play_track=function(x){x.preventDefault();
if("#"==a(this).attr("href")||""==a(this).attr("href")){return false;}if(d.settings.obj.status=="working"){return false;}var v=_pretty_link(a(this)),w=[v];
if(d.settings.mobile){var y="add_track";}else{var y="play_track";}d.settings.obj={status:"working",action:"play_track",tracks:w,tracks_size:1,track_nr:-1};
t();return false;};_add_tracks=function(w){w.preventDefault();var z=a(this).data("id");if(z==undefined||z==""||a("#"+z).length<=0){return false;}if(d.settings.obj.status=="working"){return false;
}var y=a("#"+z),v=new Array(),x=a("a.sp-add-track, a.sp-play-track",y).length;a("a.sp-add-track, a.sp-play-track",y).each(function(A){v.push(_pretty_link(a(this)));
});d.settings.obj={status:"working",action:"add_tracks",tracks:v,tracks_size:x,track_nr:-1};t();};_play_tracks=function(w){w.preventDefault();var A=a(this).data("id");
if(A==undefined||A==""||a("#"+A).length<=0){return false;}if(d.settings.obj.status=="working"){return false;}var y=a("#"+A),v=new Array(),x=a("a.sp-add-track, a.sp-play-track",y).length;
a("a.sp-add-track, a.sp-play-track",y).each(function(B){v.push(_pretty_link(a(this)));});if(d.settings.mobile){var z="add_tracks";}else{var z="play_tracks";
}d.settings.obj={status:"working",action:"play_tracks",tracks:v,tracks_size:x,track_nr:-1};t();};_debug=function(v){if(d.settings.debug){a("#scamp-console").append(v+"<br>");
}};d.update_events=function(v){a(v).off("click",".sp-add-track",_add_track);a(v).off("click",".sp-play-track",_play_track);a(v).off("click",".sp-add-list",_add_tracks);
a(v).off("click",".sp-play-list",_play_tracks);a(v).on("click",".sp-add-track",_add_track);a(v).on("click",".sp-play-track",_play_track);a(v).on("click",".sp-add-list",_add_tracks);
a(v).on("click",".sp-play-list",_play_tracks);};d.update_content=function(){var x=d.settings.track,v=null;if(x==null){return;}a("a.sp-play-track").removeClass("sp-play sp-pause sp-stop sp-loading");
if(x.hasClass("sc-list")){v=x.data("sc_list");}else{if(x.hasClass("sc-track")){v=x.data("sc");}else{v=x.find(".sp-track-control").attr("href");}}var w=a('a.sp-play-track[href="'+v+'"]');
if(w.length>0){switch(d.settings.status){case"loading":w.addClass("sp-loading");break;case"play":w.addClass("sp-play");break;case"pause":w.addClass("sp-pause");
break;case"stop":w.addClass("sp-stop");break;}}};d.addTrack=function(v,x){if(d.settings.obj.status=="working"){return false;}if(typeof v=="undefined"){return false;
}var v=a('<a href="'+v.url+'" data-cover="'+v.cover+'" data-artist="'+v.artist+'" data-artist_url="'+v.artist_url+'" data-artist_target="'+v.artist_target+'" data-release_url="'+v.release_url+'" data-release_target="'+v.release_target+'" data-shop_url="'+v.shop_url+'" data-shop_target="'+v.shop_target+'" data-free_download="'+w[i].free_download+'">'+v.title+"</a>"),w=[v];
d.settings.obj={status:"working",action:x,tracks:w,tracks_size:1,track_nr:-1};t();return false;};d.addTracks=function(y,B){if(d.settings.obj.status=="working"){return false;
}if(typeof y=="undefined"||y.length==0){return false;}var v=new Array(),A=y.length;for(var z=0,x=A;z<x;z++){var w=a('<a href="'+y[z].url+'" data-cover="'+y[z].cover+'" data-artist="'+y[z].artist+'" data-artist_url="'+y[z].artist_url+'" data-artist_target="'+y[z].artist_target+'" data-release_url="'+y[z].release_url+'" data-release_target="'+y[z].release_target+'" data-shop_url="'+y[z].shop_url+'" data-shop_target="'+y[z].shop_target+'"  data-free_download="'+y[z].free_download+'">'+y[z].title+"</a>");
v.push(w);}d.settings.obj={status:"working",action:B,tracks:v,tracks_size:A,track_nr:-1};t();};d.playerAction=function(v){if(d.settings.obj.status=="working"){return false;
}if(v=="play"){n();}else{if(v=="stop"){k();}else{if(v=="next"){f();}else{if(v=="prev"){e();}}}}};q();};})(jQuery);